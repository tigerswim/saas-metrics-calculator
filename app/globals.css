@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground: 15 23 42;
  --background: 255 255 255;
  --accent: 37 99 235; /* Blue-600 */
  --muted: 100 116 139;
}

@layer base {
  body {
    color: rgb(var(--foreground));
    background: rgb(var(--background));
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11', 'tnum';
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Tabular figures for all numbers */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
}

/* Minimal scrollbar */
::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #e2e8f0;
  border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
  background: #cbd5e1;
}

/* Input styling */
input[type='number']::-webkit-inner-spin-button,
input[type='number']::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type='number'] {
  -moz-appearance: textfield;
}

/* Data table rows */
.data-row {
  @apply border-b border-slate-100 py-2;
}

.data-row:last-child {
  @apply border-b-0;
}

/* Variance indicators */
.variance-positive {
  @apply text-slate-900;
}

.variance-negative {
  @apply text-slate-900;
}

.variance-positive::before {
  content: '↑';
  @apply text-emerald-600 mr-1;
}

.variance-negative::before {
  content: '↓';
  @apply text-rose-600 mr-1;
}

/* Section dividers */
.section-divider {
  @apply border-t border-slate-200 pt-8 mt-8;
}

/* Metric value styling */
.metric-value {
  @apply font-semibold tabular-nums tracking-tight;
}

.metric-label {
  @apply text-slate-500 text-sm;
}

/* Attention indicator */
.attention-marker {
  @apply w-1 h-full absolute left-0 top-0;
}

.attention-critical {
  @apply bg-rose-500;
}

.attention-moderate {
  @apply bg-amber-500;
}

.attention-good {
  @apply bg-emerald-500;
}

/* Focus states - Desktop */
button:focus-visible,
input:focus-visible {
  @apply outline-none ring-2 ring-blue-600 ring-offset-2;
}

/* Touch-friendly focus states - Mobile */
@media (hover: none) and (pointer: coarse) {
  button:active,
  input:active {
    @apply outline-none ring-2 ring-blue-600 ring-offset-1;
  }

  /* Prevent iOS tap highlight */
  button,
  a,
  input {
    -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
  }
}

/* Tooltip styling */
.formula-tooltip {
  @apply absolute z-50 bg-slate-900 text-white text-xs px-3 py-2 rounded max-w-xs;
  @apply opacity-0 invisible transition-all duration-150;
}

.formula-trigger:hover .formula-tooltip {
  @apply opacity-100 visible;
}

/* Connection line animations */
@keyframes flowDash {
  0% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: -10;
  }
}

/* Horizontal scrollbar for Budget/Activities layers */
.scrollbar-thin-horizontal::-webkit-scrollbar {
  height: 8px;
}

.scrollbar-thin-horizontal::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin-horizontal::-webkit-scrollbar-thumb {
  background-color: rgb(203 213 225); /* slate-300 */
  border-radius: 4px;
}

.scrollbar-thin-horizontal::-webkit-scrollbar-thumb:hover {
  background-color: rgb(148 163 184); /* slate-400 */
}

/* Firefox fallback */
.scrollbar-thin-horizontal {
  scrollbar-width: thin;
  scrollbar-color: rgb(203 213 225) transparent;
}

/* Mobile-specific optimizations */
@media (max-width: 640px) {
  /* Prevent text size adjustment on orientation change */
  html {
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Smoother scrolling on mobile */
  body {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  /* Better tap targets */
  button,
  a,
  input,
  select,
  textarea {
    touch-action: manipulation;
  }
}

/* Print styles */
@media print {
  body {
    background: white;
  }

  .no-print {
    display: none !important;
  }
}
